<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="This vignette addresses how to pull the clean 2020 UNAIDS Estimates from Google Drive to R.
">
<title>Accesing Clean UNAIDS Data • mindthegap</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Accesing Clean UNAIDS Data">
<meta property="og:description" content="This vignette addresses how to pull the clean 2020 UNAIDS Estimates from Google Drive to R.
">
<meta property="og:image" content="https://usaid-oha-si.github.io/mindthegap/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mindthegap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/accessing-clean-unaids.html">Accesing Clean UNAIDS Data</a>
    <a class="dropdown-item" href="../articles/epi_control_plots.html">Epidemic Control Plots</a>
    <a class="dropdown-item" href="../articles/relative-plhiv-base.html">90-90-90 Target Progress: Relative Base vs. PLHIV Base</a>
    <a class="dropdown-item" href="../articles/unaids-data-dictionary.html">Data Dictionary &amp; Use Cases</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USAID-OHA-SI/mindthegap/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">

<div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Accesing Clean UNAIDS Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/USAID-OHA-SI/mindthegap/blob/HEAD/vignettes/accessing-clean-unaids.Rmd" class="external-link"><code>vignettes/accessing-clean-unaids.Rmd</code></a></small>
      <div class="d-none name"><code>accessing-clean-unaids.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>This vignette covers how to access the clean and tidy annual UNAIDS Estimates from Google Drive in R. The MindTheGap package uses a cleaning function (<code>munge_unaids</code>) to process, munge, and tidy the UNAIDS HIV Estimates from AIDSInfo and <code>pull_unaids</code> to pull the cleaned data from Google Drive.</p>
<p>Let’s start by loading the MindTheGap package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/USAID-OHA-SI/mindthegap" class="external-link">mindthegap</a></span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="aidsinfo-data-structure-and-tidying">AIDSInfo Data Structure and Tidying<a class="anchor" aria-label="anchor" href="#aidsinfo-data-structure-and-tidying"></a>
</h3>
<p>The UNAIDS data reports on HIV estimates with uncertainty bounds from 1990 to 2020, and includes both percent indicators and integer indicators. The data is sourced from the UNAIDS AIDSInfo database, making it publicly accessible data.</p>
<ul>
<li>There are 2 main groups of data in this dataset:
<ul>
<li>HIV/AIDS Estimates</li>
<li>HIV Testing and Treatment Cascade Data</li>
</ul>
</li>
</ul>
<p>The structure of the data from AIDSInfo itself is not tidy and requires some munging and reshaping before it can be utilized for analytics and visualizations. As such, the <code>munge_unaids</code> function reads in the original dataset from Google Drive, munges and reshapes the data in a tidy format, and exports the data as a dataframe that we then push back to Google Drive.</p>
<p>To use <code>munge_unaids</code>, there are 2 important parameters: 1. the <code>return_type</code>: which group of data you want to use (HIV Estimates or Test &amp; Treat Cascade) 2. the <code>indicator_type</code>: percent indicators or integer indicators. Let’s take a look at how <code>munge_unaids</code> works below.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/munge_unaids.html">munge_unaids</a></span><span class="op">(</span>return_type <span class="op">=</span> <span class="st">"HIV Estimates"</span>, indicator_type <span class="op">=</span> <span class="st">"Integer"</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"html"</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:right;">
year
</th>
<th style="text-align:left;">
iso
</th>
<th style="text-align:left;">
country
</th>
<th style="text-align:left;">
regions
</th>
<th style="text-align:left;">
indicator
</th>
<th style="text-align:left;">
age
</th>
<th style="text-align:left;">
sex
</th>
<th style="text-align:left;">
stat
</th>
<th style="text-align:right;">
value
</th>
<th style="text-align:left;">
sheet
</th>
<th style="text-align:left;">
indic_type
</th>
<th style="text-align:left;">
pepfar
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1990
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Global
</td>
<td style="text-align:left;">
Global
</td>
<td style="text-align:left;">
AIDS Related Deaths
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
est
</td>
<td style="text-align:right;">
320000
</td>
<td style="text-align:left;">
HIV Estimates
</td>
<td style="text-align:left;">
Integer
</td>
<td style="text-align:left;">
Non-PEPFAR
</td>
</tr>
<tr>
<td style="text-align:right;">
1990
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Global
</td>
<td style="text-align:left;">
Global
</td>
<td style="text-align:left;">
AIDS Related Deaths
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
low
</td>
<td style="text-align:right;">
220000
</td>
<td style="text-align:left;">
HIV Estimates
</td>
<td style="text-align:left;">
Integer
</td>
<td style="text-align:left;">
Non-PEPFAR
</td>
</tr>
<tr>
<td style="text-align:right;">
1990
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Global
</td>
<td style="text-align:left;">
Global
</td>
<td style="text-align:left;">
AIDS Related Deaths
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
460000
</td>
<td style="text-align:left;">
HIV Estimates
</td>
<td style="text-align:left;">
Integer
</td>
<td style="text-align:left;">
Non-PEPFAR
</td>
</tr>
<tr>
<td style="text-align:right;">
1990
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Global
</td>
<td style="text-align:left;">
Global
</td>
<td style="text-align:left;">
AIDS Related Deaths
</td>
<td style="text-align:left;">
0-14
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
est
</td>
<td style="text-align:right;">
120000
</td>
<td style="text-align:left;">
HIV Estimates
</td>
<td style="text-align:left;">
Integer
</td>
<td style="text-align:left;">
Non-PEPFAR
</td>
</tr>
<tr>
<td style="text-align:right;">
1990
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Global
</td>
<td style="text-align:left;">
Global
</td>
<td style="text-align:left;">
AIDS Related Deaths
</td>
<td style="text-align:left;">
0-14
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
low
</td>
<td style="text-align:right;">
78000
</td>
<td style="text-align:left;">
HIV Estimates
</td>
<td style="text-align:left;">
Integer
</td>
<td style="text-align:left;">
Non-PEPFAR
</td>
</tr>
<tr>
<td style="text-align:right;">
1990
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Global
</td>
<td style="text-align:left;">
Global
</td>
<td style="text-align:left;">
AIDS Related Deaths
</td>
<td style="text-align:left;">
0-14
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
180000
</td>
<td style="text-align:left;">
HIV Estimates
</td>
<td style="text-align:left;">
Integer
</td>
<td style="text-align:left;">
Non-PEPFAR
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="pull-clean-data-from-google-drive">Pull clean data from Google Drive<a class="anchor" aria-label="anchor" href="#pull-clean-data-from-google-drive"></a>
</h3>
<p>With <code>munge_unaids</code>, we are left with a clean and tidy dataset that includes a flag to denote whether a country is a PEPFAR country or not. In order to make this data accessible outside of R and cut down on the processing time, we uploaded the clean UNAIDS data to Google Drive and wrote the function <code>pull_unaids</code> to easily access this data.</p>
<p>To use <code>pull_unaids</code>, there are 2 parameters:</p>
<ol style="list-style-type: decimal">
<li>
<code>sheetname</code>: This parameter corresponds to the earlier parameter in <code>munge_unaids</code> that denotes the <code>return_type</code> and <code>indicator_type</code>.</li>
</ol>
<ul>
<li>For this parameter, use one or more of the following depending on your analytic question:
<ul>
<li>“HIV Estimates - Integer”</li>
<li>“HIV Estimates - Percent”</li>
<li>“Test &amp; Treat - Integer”</li>
<li>“Test &amp; Treat - Percent”</li>
</ul>
</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>
<code>pepfar_only</code>: if TRUE, this parameter will return a dataset of only PEPFAR countries</li>
</ol>
<p>In order to access the data from Google drive, be sure to load your USAID credentials. You can achieve this by using the <code><a href="https://rdrr.io/pkg/glamr/man/load_secrets.html" class="external-link">glamr::load_secrets()</a></code> function in the <code>glamr</code> package or authenticate through the <code>googlesheets</code> package using <code>googlesheets::gs_auth()</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/USAID-OHA-SI/glamr" class="external-link">glamr</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/glamr/man/load_secrets.html" class="external-link">load_secrets</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">df_est</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pull_unaids.html">pull_unaids</a></span><span class="op">(</span>sheetname <span class="op">=</span> <span class="st">"HIV Estimates - Integer"</span>, pepfar_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df_est</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"html"</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:right;">
year
</th>
<th style="text-align:left;">
iso
</th>
<th style="text-align:left;">
country
</th>
<th style="text-align:left;">
regions
</th>
<th style="text-align:left;">
indicator
</th>
<th style="text-align:left;">
age
</th>
<th style="text-align:left;">
sex
</th>
<th style="text-align:left;">
stat
</th>
<th style="text-align:right;">
value
</th>
<th style="text-align:left;">
sheet
</th>
<th style="text-align:left;">
indic_type
</th>
<th style="text-align:left;">
pepfar
</th>
<th style="text-align:left;">
plhiv_base_90s
</th>
<th style="text-align:left;">
rel_base_90s
</th>
<th style="text-align:left;">
epi_control
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1990
</td>
<td style="text-align:left;">
IND
</td>
<td style="text-align:left;">
India
</td>
<td style="text-align:left;">
Asia and the Pacific
</td>
<td style="text-align:left;">
AIDS Related Deaths
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
est
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
HIV Estimates
</td>
<td style="text-align:left;">
Integer
</td>
<td style="text-align:left;">
PEPFAR
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
1990
</td>
<td style="text-align:left;">
IND
</td>
<td style="text-align:left;">
India
</td>
<td style="text-align:left;">
Asia and the Pacific
</td>
<td style="text-align:left;">
AIDS Related Deaths
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
low
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
HIV Estimates
</td>
<td style="text-align:left;">
Integer
</td>
<td style="text-align:left;">
PEPFAR
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
1990
</td>
<td style="text-align:left;">
IND
</td>
<td style="text-align:left;">
India
</td>
<td style="text-align:left;">
Asia and the Pacific
</td>
<td style="text-align:left;">
AIDS Related Deaths
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
HIV Estimates
</td>
<td style="text-align:left;">
Integer
</td>
<td style="text-align:left;">
PEPFAR
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
1990
</td>
<td style="text-align:left;">
IND
</td>
<td style="text-align:left;">
India
</td>
<td style="text-align:left;">
Asia and the Pacific
</td>
<td style="text-align:left;">
AIDS Related Deaths
</td>
<td style="text-align:left;">
0-14
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
est
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
HIV Estimates
</td>
<td style="text-align:left;">
Integer
</td>
<td style="text-align:left;">
PEPFAR
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
1990
</td>
<td style="text-align:left;">
IND
</td>
<td style="text-align:left;">
India
</td>
<td style="text-align:left;">
Asia and the Pacific
</td>
<td style="text-align:left;">
AIDS Related Deaths
</td>
<td style="text-align:left;">
0-14
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
low
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
HIV Estimates
</td>
<td style="text-align:left;">
Integer
</td>
<td style="text-align:left;">
PEPFAR
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
1990
</td>
<td style="text-align:left;">
IND
</td>
<td style="text-align:left;">
India
</td>
<td style="text-align:left;">
Asia and the Pacific
</td>
<td style="text-align:left;">
AIDS Related Deaths
</td>
<td style="text-align:left;">
0-14
</td>
<td style="text-align:left;">
all
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
HIV Estimates
</td>
<td style="text-align:left;">
Integer
</td>
<td style="text-align:left;">
PEPFAR
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Aaron Chafetz, Karishma Srikanth.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
