<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Epidemic Control Plots • mindthegap</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Epidemic Control Plots">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mindthegap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/accessing-clean-unaids.html">Accessing Clean UNAIDS Data</a></li>
    <li><a class="dropdown-item" href="../articles/epi_control_plots.html">Epidemic Control Plots</a></li>
    <li><a class="dropdown-item" href="../articles/relative-plhiv-base.html">95-95-95 Target Progress: Relative Base vs. PLHIV Base</a></li>
    <li><a class="dropdown-item" href="../articles/unaids-data-dictionary.html">Data Dictionary &amp; Use Cases</a></li>
    <li><a class="dropdown-item" href="../articles/edms-pull.html">Extracting and Processing Data from EDMS</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USAID-OHA-SI/mindthegap/"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Epidemic Control Plots</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/USAID-OHA-SI/mindthegap/blob/main/vignettes/epi_control_plots.Rmd" class="external-link"><code>vignettes/epi_control_plots.Rmd</code></a></small>
      <div class="d-none name"><code>epi_control_plots.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>PEPFAR defines HIV epidemic control as the “point at which the total
number of new HIV infections falls below the total number of deaths from
all causes among HIV-infected individuals, with both declining.” UNAIDS
estimates this point using the Incidence-Mortality Ration (IMR).
Epidemic control indicators are all available from the data available in
<code>load_unaids</code>, which also includes a column called
<code>achv_epi_control</code> which is a logical variable about whether
the country had met these three epidemic control criteria in a given
year (for all age and sex). This information can be plotted with a built
in function, <code>plot_epi_trends</code>, which we will demonstrate
below.</p>
<div class="section level3">
<h3 id="load-dependencies">Load dependencies<a class="anchor" aria-label="anchor" href="#load-dependencies"></a>
</h3>
<p>In addition to <code>mindthegap</code> make sure you have
<code>glitr</code> installed. This does not need to be loaded into your
session, but is needed to run the plots. Dependent packages are
typically installed from CRAN, but since our packages are on rOpenSci,
they are not installed.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'glitr'</span>, <span class="st">'patchwork'</span><span class="op">)</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'https://usaid-oha-si.r-universe.dev'</span>, <span class="st">'https://cran.r-project.org/'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/USAID-OHA-SI/mindthegap" class="external-link">mindthegap</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com" class="external-link">patchwork</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="epidemic-control-plotting-function">Epidemic Control Plotting Function<a class="anchor" aria-label="anchor" href="#epidemic-control-plotting-function"></a>
</h3>
<p>First, let’s take a look at the <code>plot_epi_trends</code> function
in action: to use this function, first load the estimates data from the
<code>mindthegap</code> package and specify your PEPFAR country of
interest in the <code>sel_cntry</code> parameter of the
<code>plot_epi_trends</code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_unaids</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_unaids.html">load_unaids</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_epi_trends.html">plot_epi_trends</a></span><span class="op">(</span><span class="va">df_unaids</span>, sel_cntry <span class="op">=</span> <span class="st">"Kenya"</span><span class="op">)</span></span></code></pre></div>
<p><img src="epi_control_plots_files/figure-html/unnamed-chunk-2-1.png" width="720" style="display: block; margin: auto;">
The subtitle includes the epi control information for a given year - the
direction of total death and new infections, both of which should be
declining, and the IMR, which should be below 1.</p>
<p>In case you want to compare epidemic control across countries, the
<code>plot_epi_trends</code> function allows for you to list several
countries of interest in the <code>sel_cntry</code> parameter as
well.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_epi_trends.html">plot_epi_trends</a></span><span class="op">(</span><span class="va">df_unaids</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Kenya"</span>,<span class="st">"Tanzania"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="epi_control_plots_files/figure-html/unnamed-chunk-3-1.png" width="720" style="display: block; margin: auto;"></p>
<p>In addition to looking at epidemic control at the country level, we
can also see trends across all of PEPFAR by just using the
<code><a href="../reference/plot_epi_trends.html">plot_epi_trends()</a></code> function, as “ALL PEPFAR” is the default
country in the <code>sel_cntry</code> parameter. Be aware that we are
summing up point estimates across all PEPFAR countries and these data
points have not be estimated and released by UNAIDS.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_epi_trends.html">plot_epi_trends</a></span><span class="op">(</span><span class="va">df_unaids</span><span class="op">)</span></span></code></pre></div>
<p><img src="epi_control_plots_files/figure-html/unnamed-chunk-4-1.png" width="720" style="display: block; margin: auto;"></p>
<p>This function makes it easy to generate plots on your own for
countries of interest. Let’s peek under the hood and see how the
function works to munge the data and create the plots.</p>
</div>
<div class="section level3">
<h3 id="race-to-the-bottom">Race to the bottom<a class="anchor" aria-label="anchor" href="#race-to-the-bottom"></a>
</h3>
<p>While time-series data is often presented linearly, with time on the
x-axis, we can also use a connected scatterplot to illustrate a
country’s journey toward epidemic control. A connected scatterplot
combines elements of both scatterplots and line charts, providing a
dynamic view of the relationship between two variables over time.</p>
<p>In the context of epidemic control, each data point represents a
combination of total deaths (x-axis) and new HIV infections (y-axis) for
a given year. These points are connected chronologically to show how the
relationship between deaths and new infections evolves over time.</p>
<p>The goal of epidemic control can be visualized as a 45-degree line,
indicating balance between the two indicators. When the trend line moves
closer to zero on both axes, it suggests progress toward fewer deaths
and fewer new infections. If the connected line trends towards zero, it
indicates that the country is moving in a positive direction—toward
reduced mortality and reduced spread of HIV.</p>
<p>Points that fall closer to the total deaths axis indicate periods
when epidemic control is being approached or maintained. Let’s take an
example from Zambia to see this relationship in action. Using the
<code><a href="../reference/plot_connected_scatter.html">plot_connected_scatter()</a></code> we can visualize Zambia’s progress
towards epi control.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_connected_scatter.html">plot_connected_scatter</a></span><span class="op">(</span><span class="va">df_unaids</span>, sel_cntry <span class="op">=</span> <span class="st">"Zambia"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="st">"Zambia reached epidemic control in 2023"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="epi_control_plots_files/figure-html/unnamed-chunk-5-1.png" width="720" style="display: block; margin: auto;">
The <code><a href="../reference/plot_connected_scatter.html">plot_connected_scatter()</a></code> can also take multiple country
arguments to make comparison plots. While the function will
automatically scale the axes for you, it is recommended comparing
countries with similar mangitude of epidemic control metrics. Comparing
South Africa to Rwanda will result in a graphic that is dominated by the
sheer size of the epidemic in South Africa. Below, we show the progress
of Mozambique, Tanzania and Malawi. Coincidentally, each country appears
to be on similar paths, but at different points in time.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_connected_scatter.html">plot_connected_scatter</a></span><span class="op">(</span><span class="va">df_unaids</span>, sel_cntry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Malawi"</span>, <span class="st">"Mozambique"</span>, <span class="st">"Tanzania"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="st">"Zambia reached epidemic control in 2023"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="epi_control_plots_files/figure-html/unnamed-chunk-6-1.png" width="720" style="display: block; margin: auto;"></p>
<p>The race to the bottom plots can also be combined together if
countries naturally fall into different classes. Below, countries are
sorted into large and small groups to depict epidemic control
conditioned on a country’s progress to the 95s.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Aaron Chafetz, Karishma Srikanth, Lemlem Baraki, Tim Essam.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
